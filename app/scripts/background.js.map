{"version":3,"sources":["../scripts.babel/background.js"],"names":[],"mappings":"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","file":"background.js","sourcesContent":[" /* exported authenticate */\n 'use strict';\n\n var ref;\n\n Firebase.enableLogging(false);\n\n // function showNotif(type, iconUrl, title, message, callback) {\n //   var options = {\n //     'type': type,\n //     'iconUrl': iconUrl,\n //     'title': title,\n //     'message': message\n //   };\n //   chrome.notifications.create(options, callback);\n // }\n\n chrome.notifications.onClicked.addListener(function(notificationId) {\n   ref.child('notifications/' + notificationId).remove();\n });\n\n function onNewNotification(childSnapshot) {\n   console.log(childSnapshot);\n   //showNotif('basic', 'images/icon-128.png', childSnapshot.child('title').val(), childSnapshot.child('text').val(), null);\n   var options = {\n     'type': 'basic',\n     'iconUrl': 'images/icon-128.png',\n     'title': childSnapshot.child('title').val(),\n     'message': childSnapshot.child('text').val()\n   };\n   chrome.notifications.create(childSnapshot.key(), options, null);\n }\n\n function setUpFirebase(url) {\n   console.log(ref);\n   if (ref !== undefined) {\n     ref.child('notifications').off('child_added', onNewNotification);\n   }\n   ref = new Firebase(url);\n   ref.child('notifications').on('child_added', onNewNotification);\n }\n\n chrome.runtime.onInstalled.addListener(details => {\n   console.log('previousVersion', details.previousVersion);\n });\n\n chrome.browserAction.setBadgeText({\n   text: 'Notiforward'\n });\n\n chrome.storage.onChanged.addListener(function(changes, namespace) {\n   for (var key in changes) {\n     if (key === 'firebase-url') {\n       setUpFirebase(changes[key].newValue);\n     }\n     var storageChange = changes[key];\n     console.log('Storage key \"%s\" in namespace \"%s\" changed. ' +\n       'Old value was \"%s\", new value is \"%s\".',\n       key,\n       namespace,\n       storageChange.oldValue,\n       storageChange.newValue);\n   }\n });\n\n chrome.storage.sync.get('firebase-url', function(items) {\n   if (items['firebase-url'] !== undefined) {\n     setUpFirebase(items['firebase-url']);\n   }\n });\n\n function authenticate(email, pass) {\n   ref.authWithPassword({\n     'email': email,\n     'password': pass\n   }, function(error, authData) {\n     if (error) {\n       console.log('Login Failed!', error);\n     } else {\n       console.log('Authenticated successfully with payload:', authData);\n       $('#auth-results').html('Authentication Succesful');\n     }\n   });\n }\n"]}